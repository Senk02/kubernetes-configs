apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: zenith-config
  labels:
    external-secrets.io/type: webhook
spec:
  refreshInterval: "5m"
  secretStoreRef:
    kind: ClusterSecretStore
    name: bitwarden-login
  target:
    creationPolicy: Owner
    template:
      data:
        core.yaml: |
          # This file was generated by Zenith Core.
          #
          # Developer: K4ryuu @ KitsuneLab
          # Module: K4-Zenith
          #moduleName: K4-Zenith
          createdAt: 2025-05-25T19:55:21.4884686+00:00
          lastUpdated: 2025-05-25T19:55:21.5479078+00:00
          groups:
            Modular:
              name: Modular
              items:
                LeaveMessage:
                  name: LeaveMessage
                  description: The message to display when a player leaves the server. You can use placeholders here from css_placeholderlist. Leave empty to disable.
                  defaultValue: '{gold}{name} ({steamid}) {lightred}has left the server.'
                  currentValue: '{gold}{name} ({steamid}) {lightred}has left the server.'
                OverridePlugins:
                  name: OverridePlugins
                  description: If you have any plugin that hides you Zenith menu, handle events agressively and blocks Zenith add to this list the folder name of that plugin. Zenith is going to force them to be lower priority than Zenith on some actions.
                  defaultValue:
                  - SharpTimer
                  currentValue:
                  - SharpTimer
                PlayerClantagFormat:
                  name: PlayerClantagFormat
                  description: The format for displaying the player clantag. css_placeholderlist for list
                  defaultValue: '{country_short} | {rank} |'
                  currentValue: '{country_short} | {rank} |'
                JoinMessage:
                  name: JoinMessage
                  description: The message to display when a player joins the server. You can use placeholders here from css_placeholderlist. Leave empty to disable.
                  defaultValue: '{gold}{name} ({steamid}) {green}has joined to the server from {gold}{country_long}{green}!'
                  currentValue: '{gold}{name} ({steamid}) {green}has joined to the server from {gold}{country_long}{green}!'
                PlayerChatRankFormat:
                  name: PlayerChatRankFormat
                  description: The format for displaying the player rank in chat. css_placeholderlist for list
                  defaultValue: '{rank_color}[{rank}] '
                  currentValue: '{rank_color}[{rank}] '
            Core:
              name: Core
              items:
                CenterMenuMode:
                  name: CenterMenuMode
                  description: Enable to use CenterMenu, disable to use ChatMenu.
                  defaultValue: true
                  currentValue: true
                GlobalChangeTracking:
                  name: GlobalChangeTracking
                  description: Whether to enable global change tracking. When you change config values through commands, they are saved to files.
                  defaultValue: true
                  currentValue: true
                AutoReload:
                  name: AutoReload
                  description: Whether to enable auto-reload of configurations. When config values are changed in a file, they are automatically changed on the server.
                  defaultValue: true
                  currentValue: true
                ShowDevelopers:
                  name: ShowDevelopers
                  description: Support the developers by showing their names in the menu.
                  defaultValue: true
                  currentValue: true
                CenterAlertTime:
                  name: CenterAlertTime
                  description: The time in seconds for how long the center alert is displayed by default.
                  defaultValue: 5
                  currentValue: 5
                ShowActivity:
                  name: ShowActivity
                  description: 'Specifies how admin activity should be relayed to users (1: Show to non-admins, 2: Show admin names to non-admins, 4: Show to admins, 8: Show admin names to admins, 16: Always show admin names to root users (admins are @zenith/admin)). Default is 13 due to 1+4+8'
                  defaultValue: 13
                  currentValue: 13
                CenterMessageTime:
                  name: CenterMessageTime
                  description: The time in seconds for how long the center message is displayed by default.
                  defaultValue: 10
                  currentValue: 10
                HookChatMessages:
                  name: HookChatMessages
                  description: Whether to hook chat messages to modify them.
                  defaultValue: true
                  currentValue: true
                FreezeInMenu:
                  name: FreezeInMenu
                  description: Whether to freeze the player when opening the menu.
                  defaultValue: true
                  currentValue: true
            Commands:
              name: Commands
              items:
                SettingsCommands:
                  name: SettingsCommands
                  description: Open the settings menu for players
                  defaultValue:
                  - settings
                  - preferences
                  - prefs
                  currentValue:
                  - settings
                  - preferences
                  - prefs
            Database:
              name: Database
              items:
                Username:
                  name: Username
                  description: The username for accessing the database
                  defaultValue: csgo-hvh
                  currentValue: csgo-hvh
                SaveOnRoundEnd:
                  name: SaveOnRoundEnd
                  description: Whether to save every player setting and storage change on round ends
                  defaultValue: true
                  currentValue: true
                TablePurgeDays:
                  name: TablePurgeDays
                  description: The number of days of inactivity after which unused data is automatically purged
                  defaultValue: 30
                  currentValue: 30
                Password:
                  name: Password
                  description: The password for accessing the database
                  defaultValue: "{{ .mariadb_password | toString }}"
                  currentValue: "{{ .mariadb_password | toString }}"
                AutoSaveInterval:
                  name: AutoSaveInterval
                  description: The interval in minutes for automatic saving of player settings and storage (0 - disable)
                  defaultValue: 10
                  currentValue: 10
                Port:
                  name: Port
                  description: The port number of the database
                  defaultValue: 3306
                  currentValue: 3306
                Hostname:
                  name: Hostname
                  description: The IP address or hostname of the database
                  defaultValue: mariadb
                  currentValue: mariadb
                Sslmode:
                  name: Sslmode
                  description: The SSL mode for the database connection (none, preferred, required, verifyca, verifyfull)
                  defaultValue: preferred
                  currentValue: preferred
                Database:
                  name: Database
                  description: The name of the database
                  defaultValue: csgo-hvh
                  currentValue: csgo-hvh
  data:
    - secretKey: mariadb_password
      sourceRef:
        storeRef:
          name: bitwarden-login
          kind: ClusterSecretStore
      remoteRef:
        key: 6b3da1b0-d854-44fe-b902-c36ad6906cec
        property: password